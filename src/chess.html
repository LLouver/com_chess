<!DOCTYPE html>
<html lang="en" >
<head>
	<meta charset="UTF-8">
	<title>Chess</title>
	<script type="text/javascript" src="js/main.js"></script>
	<script type="text/javascript" src="js/style.js"></script>
	<script type="text/javascript" src="js/command.js"></script>
	<script type="text/javascript" src="js/piece.js"></script>
	<script type="text/javascript" src="js/commandAnalysis.js"></script>
	<script type="text/javascript" src="js/socket.js"></script>
	<script type="text/javascript" src="js/chessGame.js"></script>
	<script type="text/javascript" src="js/animation.js"></script>
	<script type="text/javascript" src="js/timer.js"></script>
	<script type="text/javascript" src="js/debug.js"></script>
	<link type="text/css" href="css/main.css" rel="stylesheet">
	<link type="text/css" href="css/piece.css" rel="stylesheet">
	<script>
		//游戏唯一识别id
        var gameId='0';
        //记录双方的名字
        var playerName=['null','null'];
        //记录是否是host
        var isHost=0;
        //记录双方准备状况
        var ready=[0,0];
        //记录游戏是否已经开始
        var started=0;
        //记录现在是不是自己的回合，能不能移动棋子
        var movable=0;
        //记录局面
        var gameSitu=[];
        //辅助数组，用于标记各种被攻击，可走到的位置。
        var attackInfo=[];
        //辅助数组，用于标记各种被攻击，可走到的位置。
        var moveInfo=[];
        //表示游戏者方向，1白0黑
        let side=1;
        //表示当前选中的棋子坐标，[0,0]表示没选
		let chosenPiece=[];
        //表示决定去哪
		let chosenToGo=[];
        //表示局时
        var restTime=[600,600];
        //表示步时
        var stepTime=30;
		//计时器
        let counting;
		//标记过路兵
        let passant={x:0,y:0};
        //王车是否移动过
		let isMoved={bk:0,br1:0,br8:0,wk:0,wr1:0,wr8:0};
	</script>
</head>

<body style="background-color: #312e2b">

<div id="mainBoard" hidden>
	<div id="enemyPlayer" class="player">
		<span id="enemyName">
			Enemy
		</span>
		<span id="enemyCounting">
			ahaha
		</span>
	</div>
	<div id="board"></div>
	<div id="selfPlayer" class="player">
		<span  id="meName">
			Me
		</span >
		<span  id="meCounting">
			ahaha
		</span >
	</div>
</div>

<div id="readyButton" onclick="clickReady() " hidden>准备</div>

<div id="settingButton" onclick="showTimeSetting(1)" hidden>设置时间</div>

<div id="inputBlock" hidden = "hidden">
	<div style="margin: auto">加入或主持一场比赛</div>
	<label style="margin: auto">
		昵 称 <input id="inputPlayerName" >
	</label>
	<label style="margin: auto">
		房 间 <input id="inputGameId">
	</label>

	<div style="margin: auto; width: 50%; height: 40%; display: flex ; flex-direction: row; justify-content: space-around">
		<div id="hostButton" class="button" onclick="clickJoin()" style="display: flex ; flex-direction: row; justify-content: space-around">加入！</div>
		<div id="joinButton" class="button" onclick="clickHost()" style="display: flex ; flex-direction: row; justify-content: space-around">主持！</div>
	</div>

</div>

<div id="timeSettingBlock" hidden = "hidden">
	<div style="margin: auto">时间设置</div>
	<div style="margin: auto">
		局 时 <input id="globalTimeInput" > s
	</div>
	<div style="margin: auto">
		步 时 <input id="stepTimeInput"> s
	</div>

	<div style="margin: auto; width: 50%; height: 40%; display: flex ; flex-direction: row; justify-content: space-around">
		<div id="OKButton" class="button" onclick="clickSetTime()" style="display: flex ; flex-direction: row; justify-content: space-around">保存</div>
		<div id="cancelButton" class="button" onclick="showTimeSetting(0)" style="display: flex ; flex-direction: row; justify-content: space-around">取消</div>
	</div>

</div>

<div id="chooseBlock" hidden>
	<div style=" height:20%; display: flex;margin-top:30%; flex-direction: row; justify-content: space-around">
		<div id="chooseButton0" class="button" onclick="clickChose(1)" style="display: flex ; flex-direction: row; justify-content: space-around">执白</div>
		<div id="chooseButton1" class="button" onclick="clickChose(0)" style="display: flex ; flex-direction: row; justify-content: space-around">执黑</div>
	</div>
</div>

<div id="upgradeBlock" hidden>
	<div style="margin: auto; width: 50%; height: 40%; display: flex ; flex-direction: row; justify-content: space-around">
		<div id="queenButton" class="button" onclick="clickUpgrade('q')" style="display: flex ; flex-direction: row; justify-content: space-around">后</div>
		<div id="rookButton"  class="button" onclick="clickUpgrade('r')" style="display: flex ; flex-direction: row; justify-content: space-around">车</div>
		<div id="bishopButton" class="button" onclick="clickUpgrade('b')" style="display: flex ; flex-direction: row; justify-content: space-around">象</div>
		<div id="knightButton" class="button" onclick="clickUpgrade('n')" style="display: flex ; flex-direction: row; justify-content: space-around">马</div>
	</div>
</div>

<script>
    "use strict";
    //当浏览器大小改变时，重设棋盘大小
    window.onresize=resetBorderSize;
    resetBorderSize();
    //初始化棋盘
    for(let i = 1 ; i <= 8 ; ++i){
        //数组从位置1开始，位置0直接为空，不用管
        gameSitu[i]=[]; //数组每一个元素为一个数组
    }
    //delPiece(3,5);
    showJoinBoard(1);
</script>

</body>
</html>